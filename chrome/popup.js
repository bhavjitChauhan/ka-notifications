(()=>{"use strict";function e(e){const t=[],n=[];let c=e=(e=(e=e.replace(/```([\s\S]*?)```/gm,((e,a)=>(t.push(a),`<codeblock-placeholder-${t.length-1}>`)))).replace(/`([^\n]+?)`/g,((e,a)=>(n.push(a),`<codeinlien-placeholder-${n.length-1}>`)))).replace(/(?:\n|^)`{3}\n?((.|\n)+?)`{3}/m,'<div class="discussion-code-block">$1</div>');for(let a=0;a<100&&(e=(e=(e=e.replace(/\*([^\n]+?)\*/g,"<b>$1</b>")).replace(/_([^\n]+?)_/,"<i>$1</i>")).replace(/~([^\n]+?)~/,"<s>$1</s>"))!==c;a++)c=e;return a(e=(e=(e=(e=e.replace(/<codeblock-placeholder-(\d+)>/g,((e,a)=>`<pre><code>${t[parseInt(a)]}</code></pre>`))).replace(/<codeinline-placeholder-(\d+)>/g,((e,a)=>`<code>${n[parseInt(a)]}</code>`))).replace(/((?:http|https)(?:.*?))(?:\s|$)/g,'<a class="hyperlink" href="$1" target="_blank">$1</a>')).replace(/@([a-zA-Z][a-zA-Z\d]{0,39})/g,'<a class="hyperlink" href="https://www.khanacademy.org/profile/$1" target="_blank">@$1</a>'))}function a(e){return e.replace(/<>/g,"")}function t(e){const a=((new Date).getTime()-e.getTime())/1e3|0;if(a<60)return`${a} second${1===a?"":"s"}`;if(a<3600){const e=a/60|0;return`${e} minute${1===e?"":"s"}`}if(a<86400){const e=a/3600|0;return`${e} hour${1===e?"":"s"}`}if(a<2592e3){const e=a/86400|0;return`${e} day${1===e?"":"s"}`}if(a<31536e3){const e=a/2592e3|0;return`${e} month${1===e?"":"s"}`}const t=a/31536e3|0;return`${t} year${1===t?"":"s"}`}function n(n){const{brandNew:c,date:o,url:i}=n;switch(n.__typename){case"ResponseFeedbackNotification":return`<li class="notification ${!0===c?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${n.authorAvatarUrl}"><h3 class="notification-author-nickname">${a(n.authorNickname)}</h3><a class="hyperlink" href="https://www.khanacademy.org${i}" target="_blank">${"REPLY"===n.feedbackType?"added a comment":"answered your question"} on ${n.focusTranslatedTitle}</a><span class="notification-date">${t(new Date(o))} ago</span></div><div class="notification-content">${e(n.content)}</div><div class="notification-feedback-container"><button class="notification-feedback-button" data-url="${i}" data-typename="ResponseFeedbackNotification" data-feedbackType="${n.feedbackType}">Reply</button></div></li>`;case"ProgramFeedbackNotification":return`<li class="notification ${c?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${n.authorAvatarSrc}"><h3 class="notification-author-nickname">${a(n.authorNickname)}</h3><a class="hyperlink" href="https://www.khanacademy.org${i}" target="_blank">${"COMMENT"===n.feedbackType?"commented":"asked a question"} on ${a(n.translatedScratchpadTitle)}</a><span class="notification-date">${t(new Date(o))} ago</span></div><div class="notification-content">${e(n.content)}</div><div class="notification-feedback-container"><button class="notification-feedback-button" data-url="${i}" data-typename="ProgramFeedbackNotification" data-feedbackType="${n.feedbackType}">Reply</button></div></li>`}}const c=document.getElementById("notifications-container");chrome.storage.local.get(["prefetch_data","prefetch_cursor"]).then((({prefetch_data:e,prefetch_cursor:a})=>{if(e&&a){let a=e;if(console.log(a),!a)return;c.innerHTML=a.map(n).join("")}})).catch((e=>{console.log(e)}))})();