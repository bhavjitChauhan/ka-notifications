(()=>{"use strict";var e={262:(e,n,t)=>{t.r(n)},626:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationCount=n.getNotificationData=n.createOffscreenHeartbeat=void 0;const a=t(921);n.createOffscreenHeartbeat=async function(){await(chrome.offscreen.hasDocument?.())||await chrome.offscreen.createDocument({url:chrome.runtime.getURL("heartbeat.html"),reasons:[chrome.offscreen.Reason.BLOBS],justification:"Keep service worker alive."})},n.getNotificationData=async function(e,n){const t=await(0,a.graphQLFetchJsonResponse)("getNotificationsForUser",e,void 0===n?void 0:{after:n});if(t?.cookieError)return{error:"cookie"};if(!t?.value)return;const i=t.value?.data?.user?.notifications;return i?{value:{notifications:i.notifications,cursor:i.pageInfo.nextCursor}}:{error:"nonotifications"}},n.getNotificationCount=async function(e){const n=await(0,a.graphQLFetchJsonResponse)("getFullUserProfile",e);if(!n?.value)return;const t=n.value?.data?.user;return t?{value:t.newNotificationCount}:{error:"!user",value:t}}},921:function(e,n,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonUserProfile=n.addFeedback=n.graphQLFetchJsonResponse=n.getUserFkeyCookie=n.graphQLFetch=void 0;const i=a(t(593));async function o(e,n,t={}){return await new Promise(((a,o)=>{fetch("https://www.khanacademy.org/api/internal/graphql/"+e+"?/fastly/",{method:"POST",headers:{"X-KA-fkey":n,"Content-Type":"application/json"},body:JSON.stringify({operationName:e,query:i.default[e],variables:t}),credentials:"same-origin"}).then((async n=>{200!==n.status?o(`Error in GraphQL "${e}" call: Server responded  with status ${n.status}.`):a(n)})).catch(o)}))}async function r(){return await new Promise(((e,n)=>{chrome.cookies.get({url:"https://www.khanacademy.org",name:"fkey"},(t=>{null!==t?e(t.value):n("No fkey cookie found.")}))}))}n.graphQLFetch=o,n.getUserFkeyCookie=r,n.graphQLFetchJsonResponse=async function(e,n,t={}){let a,i;if(void 0!==n)a=n;else try{a=await r()}catch(e){return{cookieError:!0}}try{i=await o(e,a,t)}catch(e){return"Failed to fetch"===e.message?void console.log("Possible network disconnect detected, please check your internet connection."):void console.error("Error in response: ",e)}return{value:await i.json()}},n.addFeedback=async function(e,n,t,a,i){let r,s,c="scratchpad";const l=new URL("https://www.khanacademy.org/"+n).searchParams;if("ResponseFeedbackNotification"===t)s="ANSWER"===a?"QUESTION":"COMMENT",r="REPLY",c=l.get("qa_expand_type");else{if("ProgramFeedbackNotification"!==t)return!1;s=a,r="QUESTION"===a?"ANSWER":"REPLY"}const d=n.split("?")[0].split("/").pop();return await o("feedbackQuery",e,{topicId:d,feedbackType:s,currentSort:5,qaExpandKey:l.get("qa_expand_key"),focusKind:c}).then((async e=>await e.json())).then((async n=>{const t=n.data.feedback.feedback[0],s="QUESTION"===a&&"answer"===l.get("qa_expand_type")?t.answers[0].key:t.key;return await o("AddFeedbackToDiscussion",e,{parentKey:s,textContent:i,feedbackType:r,fromVideoAuthor:!1,shownLowQualityNotice:!1})})).then((e=>e.ok)).catch((e=>(console.error("Error in sending feedback: ",e),!1)))},n.getJsonUserProfile=async function(){const e=await fetch("https://www.khanacademy.org/api/internal/graphql/getFullUserProfile?hash=2921543415");return await e.json()}},310:(e,n)=>{function t(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}Object.defineProperty(n,"__esModule",{value:!0}),n.cleanse=n.parseMarkdown=void 0,n.parseMarkdown=function(e){e=t(e);const n=[],a=[];let i=e=(e=e.replace(/```([\s\S]*?)```/gm,((e,t)=>(n.push(t),`<codeblock-placeholder-${n.length-1}>`)))).replace(/`([^\n]+?)`/g,((e,n)=>(a.push(n),`<codeinline-placeholder-${a.length-1}>`)));for(let n=0;n<100&&(e=(e=(e=e.replace(/\*([^\n]+?)\*/g,"<b>$1</b>")).replace(/_([^\n]+?)_/g,"<i>$1</i>")).replace(/~([^\n]+?)~/g,"<s>$1</s>"))!==i;n++)i=e;return(e=(e=(e=e.replace(/<codeblock-placeholder-(\d+)>/g,((e,t)=>`<pre><code>${n[parseInt(t)]}</code></pre>`))).replace(/<codeinline-placeholder-(\d+)>/g,((e,n)=>`<code>${a[parseInt(n)]}</code>`))).replace(/((?:http|https)(?:.*?))(?:\s|$)/g,'<a class="hyperlink" href="$1" target="_blank">$1</a>')).replace(/@([a-zA-Z][a-zA-Z\d]{0,39})/g,'<a class="hyperlink" href="https://www.khanacademy.org/profile/$1" target="_blank">@$1</a>')},n.cleanse=t},503:function(e,n,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.initUserInterface=n.createLoggedOutString=n.createNoCookieString=n.createNoNotificationsString=n.addReplyButtonEventListeners=n.createNotificationString=void 0;const i=t(921),o=t(310),r=a(t(26)),s=a(t(489));function c(e){const n=((new Date).getTime()-e.getTime())/1e3|0;if(n<60)return`${n} second${1===n?"":"s"}`;if(n<3600){const e=n/60|0;return`${e} minute${1===e?"":"s"}`}if(n<86400){const e=n/3600|0;return`${e} hour${1===e?"":"s"}`}if(n<2592e3){const e=n/86400|0;return`${e} day${1===e?"":"s"}`}if(n<31536e3){const e=n/2592e3|0;return`${e} month${1===e?"":"s"}`}const t=n/31536e3|0;return`${t} year${1===t?"":"s"}`}function l(e){const n=document.getElementById("active-textarea");if(n){const e=n.parentElement.getElementsByClassName("notification-feedback-button")[0];e.removeEventListener("click",d),e.addEventListener("click",l),e.textContent="Reply",n.remove()}const t=e.target;t.removeEventListener("click",l),t.addEventListener("click",d),t.textContent="Cancel";const a=document.createElement("textarea");a.id="active-textarea",a.oninput=()=>{0===a.value.length?t.textContent="Cancel":t.textContent="Send",a.style.height="0",a.style.height=`${a.scrollHeight+2}px`},t.insertAdjacentElement("beforebegin",a),a.focus()}async function d(e){const n=e.target,t=document.getElementById("active-textarea");if(0===t.value.length)return n.textContent="Reply",n.removeEventListener("click",d),n.addEventListener("click",l),void t.remove();const{value:a}=t,{url:o,typename:r,feedbacktype:s}=n.dataset;n.textContent="Sending...",t.disabled=!0;try{const e=await(0,i.getUserFkeyCookie)();await(0,i.addFeedback)(e,o,r,s,a)?(n.textContent="Success!",window.setTimeout((()=>{n.textContent="Reply",t.remove()}),5e3)):(t.value="Error in sending request.",n.textContent="Failure!")}catch(e){console.error("Error in sending message: "+a+"; "+e),t.value="Error in sending request: "+e}}n.createNotificationString=function(e){const{brandNew:n,date:t,url:a}=e;switch(e.__typename){case"ResponseFeedbackNotification":return`<li class="notification ${n?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${e.authorAvatarUrl}"><h3 class="notification-author-nickname">${(0,o.cleanse)(e.authorNickname)}</h3><a class="hyperlink" href="https://www.khanacademy.org${a}" target="_blank">${"REPLY"===e.feedbackType?"added a comment":"answered your question"} on ${e.focusTranslatedTitle}</a><span class="notification-date">${c(new Date(t))} ago</span></div><div class="notification-content">${(0,o.parseMarkdown)(e.content)}</div><div class="notification-feedback-container"><button class="notification-feedback-button add-listeners" data-url="${a}" data-typename="ResponseFeedbackNotification" data-feedbacktype="${e.feedbackType}">Reply</button></div></li>`;case"ProgramFeedbackNotification":return`<li class="notification ${n?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${e.authorAvatarSrc}"><h3 class="notification-author-nickname">${(0,o.cleanse)(e.authorNickname)}</h3><a class="hyperlink" href="https://www.khanacademy.org${a}" target="_blank">${"COMMENT"===e.feedbackType?"commented":"asked a question"} on ${(0,o.cleanse)(e.translatedScratchpadTitle)}</a><span class="notification-date">${c(new Date(t))} ago</span></div><div class="notification-content">${(0,o.parseMarkdown)(e.content)}</div><div class="notification-feedback-container"><button class="notification-feedback-button add-listeners" data-url="${a}" data-typename="ProgramFeedbackNotification" data-feedbacktype="${e.feedbackType}">Reply</button></div></li>`;case"AvatarNotification":return`<li class="notification ${n?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${e.thumbnailSrc.startsWith("https://cdn.kastatic.org/")?e.thumbnailSrc:"https://cdn.kastatic.org"+e.thumbnailSrc}"><h3 class="notification-author-nickname">KA Avatars</h3><a class="hyperlink" href="https://www.khanacademy.org${a}" target="_blank">use avatar</a><span class="notification-date">${c(new Date(t))} ago</span></div><div class="notification-content">You unlocked <b>${s.default[e.name]}</b>! <i>${r.default[e.name]}</i></div></li>`;case"GroupedBadgeNotification":return`<li class="notification ${n?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${e.badgeNotifications[0].badge.icons.compactUrl}"><h3 class="notification-author-nickname">KA Badges</h3><a class="hyperlink" href="https://www.khanacademy.org${e.url}" target="_blank">view badges</a><span class="notification-date">${c(new Date(t))} ago</span></div><p class="notification-content">You earned <b>${e.badgeNotifications[0].badge.description}</b> and ${e.badgeNotifications.length-1} more! Congratulations!</p></li>`;case"BadgeNotification":return`<li class="notification ${n?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="${e.badge.icons.compactUrl}"><h3 class="notification-author-nickname">KA Badges</h3><a class="hyperlink" href="https://www.khanacademy.org/${e.badge.relativeUrl}" target="_blank">view badge</a><span class="notification-date">${c(new Date(t))}</span></div><div class="notification-content">You earned <b>${e.badge.description}</b>! <i>${e.badge.fullDescription}</i>.</div></li>`;default:return console.log(`Notification type ${e.__typename} is currently unsupported.`),`<li class="notification ${n?"new":""}"><div class="notification-header"><img class="notification-author-avatar" src="48.png"><h3 class="notification-author-nickname">Unsupported Notification Type</h3><span class="notification-date">${c(new Date(t))} ago</span></div><div class="notification-content">${JSON.stringify(e)}</div></li>`}},n.addReplyButtonEventListeners=function(){const e=document.getElementsByClassName("add-listeners");for(let n=e.length;n--;)e[n].addEventListener("click",l),e[n].className="notification-feedback-button"},n.createNoNotificationsString=function(){return'<li class="notification new"><div class="notification-header"><img class="notification-author-avatar" src="32.png"><h3 class="notification-author-nickname">KA Notifications</h3></div><div class="notification-content">You have no notifications.</div></li>'},n.createNoCookieString=function(){return'<li class="notification new"><div class="notification-header"><img class="notification-author-avatar" src="32.png"><h3 class="notification-author-nickname">KA Notifications</h3></div><div class="notification-content">Your authentication cookie has expired. Please <a class="hyperlink" href="https://khanacademy.org/" target="_blank">navigate to Khan Academy</a> to refresh it.</div></li>'},n.createLoggedOutString=function(){return'<li class="notification new"><div class="notification-header"><img class="notification-author-avatar" src="32.png"><h3 class="notification-author-nickname">KA Notifications</h3></div><div class="notification-content">You are logged out. Please <a class="hyperlink" href="https://khanacademy.org/login" target="_blank">log in to Khan Academy</a> to use this extension.</div></li>'},n.initUserInterface=function(e){const n=document.getElementById("theme-button");"dark"===e&&(document.body.className=e,n.innerHTML='<svg stroke="#ffffff" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="18px" width="18px" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'),n.onclick=()=>{"dark"===document.body.className?(chrome.storage.local.remove("theme"),n.innerHTML='<svg stroke="#ffffff" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="18px" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',document.body.className=""):(chrome.storage.local.set({theme:"dark"}),n.innerHTML='<svg stroke="#ffffff" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="18px" width="18px" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>',document.body.className="dark")};const t=document.getElementById("mark-all-read"),a=document.getElementById("mark-all-read-loading");let o=!1;t.onclick=async()=>{if(!o){o=!0,a.classList.remove("hidden");try{const e=await(0,i.getUserFkeyCookie)();(await(0,i.graphQLFetchJsonResponse)("clearBrandNewNotifications",e)).value&&(o=!1,a.classList.add("hidden"),chrome.action.setBadgeText({text:""}))}catch(e){a.classList.add("hidden"),console.error(e)}}};const r=document.getElementById("settings-button"),s=document.getElementById("notifications-section"),c=document.getElementById("settings-section");r.onclick=()=>{s.classList.toggle("hidden"),c.classList.toggle("hidden"),c.classList.contains("hidden")?(r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 96 960 960" width="18"><path fill="#ffffff" d="m388 976-20-126q-19-7-40-19t-37-25l-118 54-93-164 108-79q-2-9-2.5-20.5T185 576q0-9 .5-20.5T188 535L80 456l93-164 118 54q16-13 37-25t40-18l20-127h184l20 126q19 7 40.5 18.5T669 346l118-54 93 164-108 77q2 10 2.5 21.5t.5 21.5q0 10-.5 21t-2.5 21l108 78-93 164-118-54q-16 13-36.5 25.5T592 850l-20 126H388Zm92-270q54 0 92-38t38-92q0-54-38-92t-92-38q-54 0-92 38t-38 92q0 54 38 92t92 38Zm0-60q-29 0-49.5-20.5T410 576q0-29 20.5-49.5T480 506q29 0 49.5 20.5T550 576q0 29-20.5 49.5T480 646Zm0-70Zm-44 340h88l14-112q33-8 62.5-25t53.5-41l106 46 40-72-94-69q4-17 6.5-33.5T715 576q0-17-2-33.5t-7-33.5l94-69-40-72-106 46q-23-26-52-43.5T538 348l-14-112h-88l-14 112q-34 7-63.5 24T306 414l-106-46-40 72 94 69q-4 17-6.5 33.5T245 576q0 17 2.5 33.5T254 643l-94 69 40 72 106-46q24 24 53.5 41t62.5 25l14 112Z"/></svg>',r.title="Show Settings"):(r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 96 960 960" width="18"><path fill="#fff" d="M480 896 160 576l320-320 42 42-248 248h526v60H274l248 248-42 42Z"/></svg>',r.title="Show Notifications")};const l=document.getElementById("sort-comments");(async()=>{const{commentSort:e}=await chrome.storage.local.get("commentSort");l.value=e||"Top Voted"})(),l.onchange=()=>{chrome.storage.local.set({commentSort:l.value})}}},26:e=>{e.exports=JSON.parse('{"leafers_seedling_style":"Earn 10,000 energy points.","piceratops_seedling_style":"Earn 10,000 energy points.","duskpin_seedling_style":"Earn 10,000 energy points.","primosaur_seedling_style":"Earn 10,000 energy points.","starky_seedling_style":"Earn 10,000 energy points.","spunky_sam_blue_style":"Earn 10,000 energy points.","spunky_sam_green_style":"Earn 10,000 energy points.","spunky_sam_orange_style":"Earn 10,000 energy points.","spunky_sam_red_style":"Earn 10,000 energy points.","marcimus_pink_style":"Earn 10,000 energy points.","marcimus_orange_style":"Earn 10,000 energy points.","marcimus_red_style":"Earn 10,000 energy points.","marcimus_purple_style":"Earn 10,000 energy points.","mr_pink_red_style":"Earn 10,000 energy points.","mr_pink_green_style":"Earn 10,000 energy points.","mr_pink_orange_style":"Earn 10,000 energy points.","mr_pants_teal_style":"Earn 10,000 energy points.","mr_pants_green_style":"Earn 10,000 energy points.","mr_pants_orange_style":"Earn 10,000 energy points.","mr_pants_pink_style":"Earn 10,000 energy points.","mr_pants_purple_style":"Earn 10,000 energy points.","old_spice_man_green_style":"Earn 10,000 energy points.","old_spice_man_blue_style":"Earn 10,000 energy points.","leafers_sapling_style":"Earn 50,000 energy points.","piceratops_sapling_style":"Earn 50,000 energy points.","duskpin_sapling_style":"Earn 50,000 energy points.","primosaur_sapling_style":"Earn 50,000 energy points.","starky_sapling_style":"Earn 50,000 energy points.","female_robot_amelia_style":"Earn 50,000 energy points.","male_robot_johnny_style":"Earn 50,000 energy points.","orange_juice_squid_orange_style":"Earn 50,000 energy points.","purple_pi_purple_style":"Earn 50,000 energy points.","purple_pi_pink_style":"Earn 50,000 energy points.","purple_pi_teal_style":"Earn 50,000 energy points.","leafers_tree_style":"Earn 100,000 energy points.","piceratops_tree_style":"Earn 100,000 energy points.","duskpin_tree_style":"Earn 100,000 energy points.","primosaur_tree_style":"Earn 100,000 energy points.","starky_tree_style":"Earn 100,000 energy points.","female_robot_ada_style":"Earn 100,000 energy points.","male_robot_donald_style":"Earn 100,000 energy points.","leafers_ultimate_style":"Earn 250,000 energy points.","piceratops_ultimate_style":"Earn 250,000 energy points.","duskpin_ultimate_style":"Earn 250,000 energy points.","primosaur_ultimate_style":"Earn 250,000 energy points.","starky_ultimate_style":"Earn 250,000 energy points.","female_robot_grace_style":"Earn 250,000 energy points.","male_robot_hal_style":"Earn 250,000 energy points.","winston_default_style":"Make changes to an official program","winston_baby_style":"Make changes to another user\'s program","ohnoes_default_style":"Finish watching a computer programming talk-through","hopper_happy_style":"Create a program from scratch","hopper_jumping_style":"Complete a coding challenge","hopper_cool_style":"Complete a coding challenge"}')},489:e=>{e.exports=JSON.parse('{"hopper_happy_style":"Hopper","hopper_cool_style":"Cool Hopper","hopper_jumping_style":"Jumping Hopper","leafers_seed_style":"Leafers","leafers_seedling_style":"Leafers","leafers_sapling_style":"Leafers","leafers_tree_style":"Leafers","leafers_ultimate_style":"Leafers","piceratops_seed_style":"&Pi;ceratops","piceratops_seedling_style":"&Pi;ceratops","piceratops_sapling_style":"&Pi;ceratops","piceratops_tree_style":"&Pi;ceratops","piceratops_ultimate_style":"&Pi;ceratops","duskpin_seed_style":"Duskpin","duskpin_seedling_style":"Duskpin","duskpin_sapling_style":"Duskpin","duskpin_tree_style":"Duskpin","duskpin_ultimate_style":"Duskpin","primosaur_seed_style":"Primosaur","primosaur_seedling_style":"Primosaur","primosaur_sapling_style":"Primosaur","primosaur_tree_style":"Primosaur","primosaur_ultimate_style":"Primosaur","starky_seed_style":"Starky","starky_seedling_style":"Starky","starky_sapling_style":"Starky","starky_tree_style":"Starky","starky_ultimate_style":"Starky","aqualine_seed_style":"Aqualine","aqualine_seedling_style":"Aqualine","aqualine_sapling_style":"Aqualine","aqualine_tree_style":"Aqualine","aqualine_ultimate_style":"Aqualine","spunky_sam_blue_style":"Spunky Sam","spunky_sam_green_style":"Spunky Sam","spunky_sam_orange_style":"Spunky Sam","spunky_sam_red_style":"Spunky Sam","marcimus_pink_style":"Marcimus","marcimus_orange_style":"Marcimus","marcimus_red_style":"Marcimus","marcimus_purple_style":"Marcimus","mr_pink_red_style":"Mr. Pink","mr_pink_green_style":"Mr. Pink","mr_pink_orange_style":"Mr. Pink","female_robot_amelia_style":"Amelia","female_robot_ada_style":"Ada","female_robot_grace_style":"Grace","male_robot_johnny_style":"Johnny","male_robot_donald_style":"Donald","male_robot_hal_style":"Hal","orange_juice_squid_orange_style":"Orange Juice Squid","purple_pi_purple_style":"Purple Pi","purple_pi_pink_style":"Purple Pi","purple_pi_teal_style":"Purple Pi","mr_pants_teal_style":"Mr. Pants","mr_pants_green_style":"Mr. Pants","mr_pants_orange_style":"Mr. Pants","mr_pants_pink_style":"Mr. Pants","mr_pants_purple_style":"Mr. Pants","old_spice_man_green_style":"Old Spice Man","old_spice_man_blue_style":"Old Spice Man","winston_default_style":"Winston","winston_baby_style":"Baby Winston","ohnoes_default_style":"Oh noes, the Error Buddy"}')},593:e=>{e.exports=JSON.parse('{"AddFeedbackToDiscussion":"mutation AddFeedbackToDiscussion($focusKind: String, $focusId: String, $parentKey: String, $textContent: String!, $feedbackType: FeedbackType!, $fromVideoAuthor: Boolean, $shownLowQualityNotice: Boolean) {\\n  addFeedbackToDiscussion(focusKind: $focusKind, focusId: $focusId, parentKey: $parentKey, textContent: $textContent, feedbackType: $feedbackType, fromVideoAuthor: $fromVideoAuthor, shownLowQualityNotice: $shownLowQualityNotice) {\\n    feedback {\\n      appearsAsDeleted\\n      author {\\n        id\\n        kaid\\n        nickname\\n        avatar {\\n          name\\n          imageSrc\\n          __typename\\n        }\\n        __typename\\n      }\\n      content\\n      date\\n      definitelyNotSpam\\n      deleted\\n      downVoted\\n      expandKey\\n      feedbackType\\n      flaggedBy\\n      flags\\n      focusUrl\\n      focus {\\n        kind\\n        id\\n        translatedTitle\\n        relativeUrl\\n        __typename\\n      }\\n      fromVideoAuthor\\n      key\\n      notifyOnAnswer\\n      permalink\\n      qualityKind\\n      replyCount\\n      replyExpandKeys\\n      sumVotesIncremented\\n      upVoted\\n      __typename\\n    }\\n    lowQualityResponse {\\n      feedbackCode\\n      feedbackChar\\n      feedbackType\\n      showLowQualityNotice\\n      __typename\\n    }\\n    error {\\n      code\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n","clearBrandNewNotifications":"mutation clearBrandNewNotifications {\\n  clearBrandNewNotifications {\\n    error {\\n      code\\n      __typename\\n    }\\n    __typename\\n  }\\n}","feedbackQuery":"query feedbackQuery($topicId: String!, $focusKind: String!, $cursor: String, $limit: Int, $feedbackType: FeedbackType!, $currentSort: Int, $qaExpandKey: String) {\\n  feedback(focusId: $topicId, cursor: $cursor, limit: $limit, feedbackType: $feedbackType, focusKind: $focusKind, sort: $currentSort, qaExpandKey: $qaExpandKey, answersLimit: 1) {\\n    feedback {\\n      isLocked\\n      isPinned\\n      replyCount\\n      appearsAsDeleted\\n      author {\\n        id\\n        kaid\\n        nickname\\n        avatar {\\n          name\\n          imageSrc\\n          __typename\\n        }\\n        __typename\\n      }\\n      badges {\\n        name\\n        icons {\\n          smallUrl\\n          __typename\\n        }\\n        description\\n        __typename\\n      }\\n      content\\n      date\\n      definitelyNotSpam\\n      deleted\\n      downVoted\\n      expandKey\\n      feedbackType\\n      flaggedBy\\n      flaggedByUser\\n      flags\\n      focusUrl\\n      focus {\\n        kind\\n        id\\n        translatedTitle\\n        relativeUrl\\n        __typename\\n      }\\n      fromVideoAuthor\\n      key\\n      lowQualityScore\\n      notifyOnAnswer\\n      permalink\\n      qualityKind\\n      replyCount\\n      replyExpandKeys\\n      showLowQualityNotice\\n      sumVotesIncremented\\n      upVoted\\n      ... on QuestionFeedback {\\n        hasAnswered\\n        answers {\\n          isLocked\\n          isPinned\\n          replyCount\\n          appearsAsDeleted\\n          author {\\n            id\\n            kaid\\n            nickname\\n            avatar {\\n              name\\n              imageSrc\\n              __typename\\n            }\\n            __typename\\n          }\\n          badges {\\n            name\\n            icons {\\n              smallUrl\\n              __typename\\n            }\\n            description\\n            __typename\\n          }\\n          content\\n          date\\n          definitelyNotSpam\\n          deleted\\n          downVoted\\n          expandKey\\n          feedbackType\\n          flaggedBy\\n          flaggedByUser\\n          flags\\n          focusUrl\\n          focus {\\n            kind\\n            id\\n            translatedTitle\\n            relativeUrl\\n            __typename\\n          }\\n          fromVideoAuthor\\n          key\\n          lowQualityScore\\n          notifyOnAnswer\\n          permalink\\n          qualityKind\\n          replyCount\\n          replyExpandKeys\\n          showLowQualityNotice\\n          sumVotesIncremented\\n          upVoted\\n          __typename\\n        }\\n        isOld\\n        answerCount\\n        __typename\\n      }\\n      ... on AnswerFeedback {\\n        question {\\n          isLocked\\n          isPinned\\n          replyCount\\n          appearsAsDeleted\\n          author {\\n            id\\n            kaid\\n            nickname\\n            avatar {\\n              name\\n              imageSrc\\n              __typename\\n            }\\n            __typename\\n          }\\n          badges {\\n            name\\n            icons {\\n              smallUrl\\n              __typename\\n            }\\n            description\\n            __typename\\n          }\\n          content\\n          date\\n          definitelyNotSpam\\n          deleted\\n          downVoted\\n          expandKey\\n          feedbackType\\n          flaggedBy\\n          flaggedByUser\\n          flags\\n          focusUrl\\n          focus {\\n            kind\\n            id\\n            translatedTitle\\n            relativeUrl\\n            __typename\\n          }\\n          fromVideoAuthor\\n          key\\n          lowQualityScore\\n          notifyOnAnswer\\n          permalink\\n          qualityKind\\n          replyCount\\n          replyExpandKeys\\n          showLowQualityNotice\\n          sumVotesIncremented\\n          upVoted\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    cursor\\n    isComplete\\n    sortedByDate\\n    __typename\\n  }\\n}\\n","getFeedbackRepliesPage":"query getFeedbackRepliesPage($postKey: String!, $cursor: String, $limit: Int!) {\\n  feedbackRepliesPaginated(feedbackKey: $postKey, cursor: $cursor, limit: $limit) {\\n    cursor\\n    isComplete\\n    feedback {\\n      isLocked\\n      expandKey\\n      appearsAsDeleted\\n      author {\\n        id\\n        kaid\\n        nickname\\n        avatar {\\n          name\\n          imageSrc\\n          __typename\\n        }\\n        __typename\\n      }\\n      content\\n      date\\n      definitelyNotSpam\\n      deleted\\n      downVoted\\n      expandKey\\n      feedbackType\\n      flaggedBy\\n      flaggedByUser\\n      flags\\n      focusUrl\\n      fromVideoAuthor\\n      key\\n      lowQualityScore\\n      notifyOnAnswer\\n      permalink\\n      qualityKind\\n      replyCount\\n      replyExpandKeys\\n      showLowQualityNotice\\n      sumVotesIncremented\\n      upVoted\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n","getFullUserProfile":"query getFullUserProfile($kaid: String, $username: String) {\\n  user(kaid: $kaid, username: $username) {\\n    id\\n    kaid\\n    key\\n    userId\\n    email\\n    username\\n    profileRoot\\n    gaUserId\\n    isPhantom\\n    isDeveloper: hasPermission(name: \\"can_do_what_only_admins_can_do\\")\\n    isCurator: hasPermission(name: \\"can_curate_tags\\", scope: ANY_ON_CURRENT_LOCALE)\\n    isCreator: hasPermission(name: \\"has_creator_role\\", scope: ANY_ON_CURRENT_LOCALE)\\n    isPublisher: hasPermission(name: \\"can_publish\\", scope: ANY_ON_CURRENT_LOCALE)\\n    isModerator: hasPermission(name: \\"can_moderate_users\\", scope: GLOBAL)\\n    isParent\\n    isTeacher\\n    isFormalTeacher\\n    isDataCollectible\\n    isChild\\n    isOrphan\\n    isCoachingLoggedInUser\\n    canModifyCoaches\\n    nickname\\n    hideVisual\\n    joined\\n    points\\n    countVideosCompleted\\n    bio\\n    profile {\\n      accessLevel\\n      __typename\\n    }\\n    soundOn\\n    muteVideos\\n    showCaptions\\n    prefersReducedMotion\\n    noColorInVideos\\n    newNotificationCount\\n    canHellban: hasPermission(name: \\"can_ban_users\\", scope: GLOBAL)\\n    canMessageUsers: hasPermission(\\n      name: \\"can_send_moderator_messages\\"\\n      scope: GLOBAL\\n    )\\n    isSelf: isActor\\n    hasStudents: hasCoachees\\n    hasClasses\\n    hasChildren\\n    hasCoach\\n    badgeCounts\\n    homepageUrl\\n    isMidsignupPhantom\\n    includesDistrictOwnedData\\n    includesKmapDistrictOwnedData\\n    includesK4dDistrictOwnedData\\n    canAccessDistrictsHomepage\\n    preferredKaLocale {\\n      id\\n      kaLocale\\n      status\\n      __typename\\n    }\\n    underAgeGate {\\n      parentEmail\\n      daysUntilCutoff\\n      approvalGivenAt\\n      __typename\\n    }\\n    authEmails\\n    signupDataIfUnverified {\\n      email\\n      emailBounced\\n      __typename\\n    }\\n    pendingEmailVerifications {\\n      email\\n      __typename\\n    }\\n    hasAccessToAIGuideTeacher\\n    tosAccepted\\n    shouldShowAgeCheck\\n    birthMonthYear\\n    lastLoginCountry\\n    __typename\\n  }\\n  actorIsImpersonatingUser\\n  isAIGuideEnabled\\n  hasAccessToAIGuideDev\\n}","getNotificationsForUser":"query getNotificationsForUser($after: ID) {\\n  user {\\n    id\\n    notifications(after: $after) {\\n      notifications {\\n        __typename\\n        brandNew\\n        class_\\n        date\\n        kaid\\n        read\\n        url\\n        urlsafeKey\\n        ...ThreadCreatedNotificationType\\n        ...AssignmentDueDateNotificationType\\n        ...AssignmentCreatedNotificationType\\n        ...CoachRequestNotificationType\\n        ...BadgeNotificationType\\n        ...CourseMasteryGoalCreatedNotificationType\\n        ...ModeratorNotificationType\\n        ...ProgramFeedbackNotificationType\\n        ...CoachRequestAcceptedNotificationType\\n        ...AvatarNotificationType\\n        ...InfoNotificationType\\n        ...ResponseFeedbackNotificationType\\n        ...GroupedBadgeNotificationType\\n        ...UnitMasteryGoalCreatedNotificationType\\n        ...UnitMasteryDueDateCreatedNotificationType\\n        ...CourseMasteryDueDateCreatedNotificationType\\n        ...MasteryGoalDueDateApproachingCreatedNotificationType\\n      }\\n      pageInfo {\\n        nextCursor\\n        __typename\\n      }\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n\\nfragment AssignmentCreatedNotificationType on AssignmentCreatedNotification {\\n  numAssignments\\n  contentTitle\\n  curationNodeIconURL\\n  className\\n  __typename\\n}\\n\\nfragment AssignmentDueDateNotificationType on AssignmentDueDateNotification {\\n  numAssignments\\n  dueDate\\n  contentTitle\\n  curationNodeIconURL\\n  __typename\\n}\\n\\nfragment AvatarNotificationType on AvatarNotification {\\n  name\\n  thumbnailSrc\\n  __typename\\n}\\n\\nfragment BadgeNotificationType on BadgeNotification {\\n  badgeName\\n  badge {\\n    description\\n    fullDescription\\n    name\\n    relativeUrl\\n    icons {\\n      compactUrl\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment CoachRequestAcceptedNotificationType on CoachRequestAcceptedNotification {\\n  isMultipleClassrooms\\n  student {\\n    id\\n    email\\n    nickname\\n    __typename\\n  }\\n  classroom {\\n    cacheId\\n    id\\n    name\\n    topics {\\n      id\\n      slug\\n      iconUrl\\n      key\\n      translatedStandaloneTitle\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment CoachRequestNotificationType on CoachRequestNotification {\\n  coachIsParent\\n  coach {\\n    id\\n    kaid\\n    nickname\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment CourseMasteryDueDateCreatedNotificationType on CourseMasteryDueDateCreatedNotification {\\n  dueDate\\n  course {\\n    id\\n    iconUrl\\n    translatedStandaloneTitle\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment CourseMasteryGoalCreatedNotificationType on CourseMasteryGoalCreatedNotification {\\n  curationNodeIconURL\\n  curationNodeTranslatedTitle\\n  masteryPercentage\\n  __typename\\n}\\n\\nfragment GroupedBadgeNotificationType on GroupedBadgeNotification {\\n  badgeNotifications {\\n    badge {\\n      badgeCategory\\n      description\\n      fullDescription\\n      name\\n      icons {\\n        compactUrl\\n        __typename\\n      }\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment InfoNotificationType on InfoNotification {\\n  notificationType\\n  __typename\\n}\\n\\nfragment MasteryGoalDueDateApproachingCreatedNotificationType on MasteryGoalDueDateApproachingCreatedNotification {\\n  classroomInfo: classroom {\\n    id\\n    cacheId\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment ModeratorNotificationType on ModeratorNotification {\\n  text\\n  __typename\\n}\\n\\nfragment ProgramFeedbackNotificationType on ProgramFeedbackNotification {\\n  authorAvatarSrc\\n  authorNickname\\n  feedbackType\\n  translatedScratchpadTitle\\n  content\\n  __typename\\n}\\n\\nfragment ResponseFeedbackNotificationType on ResponseFeedbackNotification {\\n  authorAvatarUrl\\n  authorNickname\\n  feedbackType\\n  focusTranslatedTitle\\n  content\\n  sumVotesIncremented\\n  __typename\\n}\\n\\nfragment ThreadCreatedNotificationType on ThreadCreatedNotification {\\n  coachee {\\n    id\\n    kaid\\n    nickname\\n    __typename\\n  }\\n  threadId\\n  flagged\\n  __typename\\n}\\n\\nfragment UnitMasteryDueDateCreatedNotificationType on UnitMasteryDueDateCreatedNotification {\\n  dueDate\\n  unit {\\n    id\\n    iconUrl\\n    translatedStandaloneTitle\\n    __typename\\n  }\\n  __typename\\n}\\n\\nfragment UnitMasteryGoalCreatedNotificationType on UnitMasteryGoalCreatedNotification {\\n  numAssignmentsCount: numAssignments\\n  classroomInfo: classroom {\\n    cacheId\\n    id\\n    coach {\\n      id\\n      nickname\\n      __typename\\n    }\\n    __typename\\n  }\\n  unit {\\n    id\\n    iconUrl\\n    parent {\\n      id\\n      iconUrl\\n      __typename\\n    }\\n    __typename\\n  }\\n  __typename\\n}\\n"}')}},n={};function t(a){var i=n[a];if(void 0!==i)return i.exports;var o=n[a]={exports:{}};return e[a].call(o.exports,o,o.exports,t),o.exports}t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{t(262);const e=t(626),n=t(503),a=document.querySelector("#notifications-container"),i=document.querySelector("#notifications-section"),o=document.querySelector("#loading-spinner-container");let r,s=!1;async function c(){try{const t=await(0,e.getNotificationData)(void 0,r);if(t.value){const{notifications:e,cursor:o}=t.value;a.insertAdjacentHTML("beforeend",e.map(n.createNotificationString).join("")),(0,n.addReplyButtonEventListeners)(),null===o&&i.removeEventListener("scroll",l),r=o,s=!1}else{if(d&&"cookie"===t.error)return a.innerHTML=(0,n.createLoggedOutString)(),o?.remove(),void(d=!1);switch(t.error){case"cookie":a.innerHTML=(0,n.createNoCookieString)(),o?.remove();break;case"nonotifications":i.removeEventListener("scroll",l),o?.remove()}}}catch(e){console.error(e)}}function l(){!s&&Math.abs(i.scrollHeight-i.scrollTop-i.clientHeight)<=76&&(s=!0,c())}let d=!0;!async function(){try{const{prefetchData:e,prefetchCursor:t,theme:s}=await chrome.storage.local.get(["prefetchData","prefetchCursor","theme"]);if((0,n.initUserInterface)(s),e)switch(e){case"info:cookie":a.innerHTML=(0,n.createNoCookieString)(),o?.remove();break;case"info:logout":a.innerHTML=(0,n.createLoggedOutString)();break;case"info:nonotifications":a.innerHTML=(0,n.createNoNotificationsString)(),o?.remove();break;default:const s=e;if(!s)return;if(a.innerHTML=s.map(n.createNotificationString).join(""),(0,n.addReplyButtonEventListeners)(),!t)return;r=t,i.addEventListener("scroll",l,{passive:!0})}else await c(),i.addEventListener("scroll",l,{passive:!0})}catch(e){console.error(e)}}()})()})();